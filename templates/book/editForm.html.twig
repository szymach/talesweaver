{% extends 'base.html.twig' %}

{% import 'partial/macros.html.twig' as macros %}

{% form_theme form 'form/formTheme.html.twig' %}
{% form_theme chapterForm 'form/formTheme.html.twig' %}

{% block seoTitle 'book.seo_title.form.edit'|trans({ '%title%': title }) %}
{% block rightMenu %}
    {% include 'partial/topMenuActions.html.twig' with {
        returnUrl: path('book_list', { page: app.request.get('page', 1) }),
        returnLabel: 'book.back.to_list'|trans
    } only %}
{% endblock %}

{% block body %}
    <div class="row">
        <div class="col col-sm-8 offset-sm-1">
            <ul class="nav nav-tabs" role="tablist">
                <li class="nav-item">
                    <a class="nav-link active" id="formContentTab" href="#formContent" data-toggle="tab">Treść</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" id="chaptersTab" href="#chapters" data-toggle="tab">Rozdziały</a>
                </li>
            </ul>
        </div>
    </div>
    <div class="row">
        <div class="col col-sm-8 offset-sm-1">
            <div class="tab-content pt-2 pb-2">
                <div class="tab-pane fade show active" id="formContent" role="tabpanel" aria-labelledby="formContent">
                    {{ form_start(form) }}
                        {{ form_row(form.title) }}
                        {{ form_row(form.description) }}
                        {{ form_rest(form) }}
                        <div class="form-group row">
                            <div class="col text-right">
                                <button class="btn btn-success">{{ 'crud.save'|trans }}</button>
                            </div>
                        </div>
                    {{ form_end(form) }}
                </div>
                <div class="tab-pane fade" id="chapters" role="tabpanel" aria-labelledby="chaptersTab">
                    {% if chapters|length > 0 %}
                        {% include 'book/chapters/list.html.twig' with { bookId: bookId, chapters: chapters, page: 1 } only %}
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
    <nav class="side-menu">
        <ul id="side-menu" class="collapse show">
            {{ macros.sidemenuLink('eye', 'display.title'|trans, 'display.label'|trans, path('book_display', { id: bookId })) }}
            {{ macros.sidemenuLink('file-pdf-o', 'pdf.title'|trans, 'pdf.label'|trans, path('book_pdf', { id: bookId })) }}
        </ul>
        <div data-target="#side-menu" data-toggle="collapse" class="text-center">
            <button class="btn btn-sm" style="width: 100%;">
                <span class="fa fa-chevron-up"></span>
            </button>
        </div>
    </nav>
    <div id="ajax-container"></div>
{% endblock %}

{% block stylesheets %}
    <link rel="stylesheet" href="{{ absolute_url(asset('assets/ckeditor.css')) }}">
{% endblock %}
{% block javascripts %}
    <script src="{{ absolute_url(asset('assets/ckeditor.js')) }}" async></script>
{% endblock %}
