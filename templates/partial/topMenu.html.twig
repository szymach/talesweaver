{% import 'partial/macros.html.twig' as macros %}
{% set currentRoute = app.request.get('_route') %}
<nav class="navbar navbar-expand-md navbar-dark bg-primary">
    <div class="container">
        <a class="navbar-brand" href="{{ path('index') }}">{{ 'meta.title'|trans }}</a>
        <button class="navbar-toggler btn collapsed"
                type="button"
                data-toggle="collapse"
                data-target="#menu"
                aria-controls="menu"
                aria-expanded="false"
                aria-label="{{ 'menu.toggle'|trans }}"
        >
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="navbar-collapse collapse" id="menu">
            <ul class="navbar-nav mr-auto">
                {{ macros.mainMenuItem('book_list', 'common.books'|trans, currentRoute) }}
                {{ macros.mainMenuItem('chapter_list', 'common.chapters'|trans, currentRoute) }}
                {{ macros.mainMenuItem('scene_list', 'common.scenes'|trans, currentRoute) }}
            </ul>
            <ul class="nav navbar-nav nav-actions">
                {{ macros.menuItem(path('change_password'), {}, 'fa-lock', 'menu.change_password'|trans, 'd-sm-block d-md-none d-xl-none') }}
                {{ macros.menuItem(path('logout'), {}, 'fa-power-off', 'menu.logout'|trans, 'd-sm-block d-md-none d-xl-none') }}
                <li class="dropdown d-none d-sm-none d-md-block d-xl-block">
                    {{ macros.dropdownToggle(app.user.username, 'menu-user') }}
                    <ul class="dropdown-menu" aria-labelledby="menu-user">
                        {{ macros.dropdownItem(path('change_password'), {}, 'fa-lock', 'menu.change_password'|trans, '') }}
                        {{ macros.dropdownItem(path('logout'), {}, 'fa-power-off', 'menu.logout'|trans, '') }}
                    </ul>
                </li>
            </ul>
        </div>
    </div>
</nav>
