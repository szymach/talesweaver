{% import _self as macros %}
<div class="modal-header">
    <h4 class="modal-title">{{ title }}</h4>
    <button type="button" class="js-close-modal close" aria-label="{{ 'modal.close'|trans }}">
        <span aria-hidden="true">&times;</span>
    </button>
</div>
<div class="display modal-body">
    {% if chapters is defined %}
        {% for chapter in chapters|filter(chapter => chapter.scenes|length > 0) %}
            <h2 class="pb-2">{{ chapter.title }}</h2>
            {{ macros.scenes(chapter.scenes) }}
        {% endfor %}
    {% elseif scenes is defined %}
        {{ macros.scenes(scenes) }}
    {% elseif text is defined %}
        {{ macros.text(text) }}
    {% endif %}
</div>
<div class="modal-footer">
    <button type="button" class="btn btn-outline-secondary js-close-modal">
        {{- 'modal.close'|trans -}}
    </button>
</div>

{% macro scenes(scenes) %}
    {% for scene in scenes|filter(scene => scene.text is not empty) %}
        <h3 class="pb-2">{{ scene.title }}</h3>
        {{ macros.text(scene.text) }}
    {% endfor %}
{% endmacro %}

{% macro text(text) %}
    <section class="scene-content pb-2">{{ text|raw }}</section>
{% endmacro %}
