---
services:
    _defaults:
        autoconfigure: true
        autowire: true

    # Entity listeners
    entity_listener.event:
        class: Talesweaver\Integration\JSON\ModelParserListener
        autoconfigure: false
        tags:
            - { name: doctrine.orm.entity_listener }

    # Entity repository
    Talesweaver\Doctrine\Repository\:
        resource: "../../src/Doctrine/Repository/*"
        autoconfigure: true
        autowire: true

    # Repository
    _instanceof:
        Talesweaver\Integration\Repository\Interfaces\RequestSecuredRepository:
            tags: ['app.param_converter.repository']

    Talesweaver\Integration\Repository\:
        resource: "../../src/Integration/Repository/*"
